<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pharmacy SOP Generator</title>

  <!-- REQUIRED FOR MOBILE -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- UI styles -->
  <link rel="stylesheet" href="css/ui-desktop.css" />
  <link rel="stylesheet" href="css/ui-mobile.css" />

  <!-- Print (A4) -->
  <link rel="stylesheet" href="css/print-a4.css" />
</head>

<body>

  <!-- APP ROOT (UI injected here) -->
  <div id="app"></div>

  <!-- CREDIT (SCREEN ONLY) -->
  <footer class="app-footer">
    Created by
    <a href="https://github.com/himshim" target="_blank" rel="noopener">
      @himshim26
    </a>
    ·
    <a
      href="https://github.com/himshim/pharmacy-sop-docgen"
      target="_blank"
      rel="noopener"
    >
      Source Code
    </a>
  </footer>

  <!-- UI LOADER -->
  <script>
    (async function () {
      const app = document.getElementById("app");
      if (!app) return;

      const isMobile = window.matchMedia("(max-width: 768px)").matches;

      // ✅ CORRECT PATHS
      const uiFile = isMobile
        ? "partials/ui-mobile.html"
        : "partials/ui-desktop.html";

      try {
        const res = await fetch(uiFile);
        if (!res.ok) throw new Error(res.status);
        app.innerHTML = await res.text();
      } catch (e) {
        console.error("UI load failed:", e);
        app.innerHTML =
          "<p style='padding:20px;color:red'>Failed to load UI</p>";
      }
    })();
  </script>

  <!-- SHARED LOGIC -->
  <script src="js/template-engine.js"></script>
  <script src="js/sop-engine.js"></script>

</body>
</html>
